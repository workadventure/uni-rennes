{"version":3,"file":"demo-a354e67b.js","sources":["../../src/demo.ts"],"sourcesContent":["/// <reference types=\"@workadventure/iframe-api-typings\" />\nimport \"./main_new.js\";\n// import { cpSync } from \"fs\";\n\n// préparer le son \"fireSound.ogg\" =======================\nvar fireSound = WA.sound.loadSound(\"../fireSound.ogg\"); // le dossier public est cast en racine du repo donc il faut juste revenir à la racine en chemin relatif\nvar config = {\n      volume : 0.75,\n      loop : true,\n      rate : 1,\n      detune : 1,\n      delay : 0,\n      seek : 0,\n      mute : false\n  }\n// faire jouer le son: fireSound.play(config);\n// arrêter le son: fireSound.stop();\n// ==========================================================\nconst run = async () => {\n\n  // Afficher/Cacher certains layers quand on entre/sort d'un layer ==\n  WA.room.onEnterLayer(\"fireLight\").subscribe(() => {\n      WA.room.showLayer(\"fireLight\");\n      WA.room.showLayer(\"darkness\");\n      fireSound.play(config);\n    });\n    \n    WA.room.onLeaveLayer(\"fireLight\").subscribe(() => {\n      WA.room.hideLayer(\"fireLight\");\n      WA.room.hideLayer(\"darkness\");\n      fireSound.stop();\n  });\n\n  // =================================================================\n\n  // Ajouter des actions possible qaund on clique sur les autres joueurs=\n  WA.ui.onRemotePlayerClicked.subscribe((remotePlayer) => {\n      remotePlayer.addAction('Ask to tell a joke', () => {\n          console.log('I am NOT telling you a joke!');\n      });\n      remotePlayer.addAction('This will disappear!', () => {\n          WA.room.hideLayer(\"floor\");\n      });\n  })\n  //=====================================================================\n\n  // Ajouter un nouveau lien twitch dans une zone sur la carte ====\n  WA.room.website.create({\n      name: \"livePlayer\",\n      url: \"https://player.twitch.tv/?&channel=rennes2D&parent=mondevirtuel.univ-rennes2.fr\", // parent=play.workadventu.re en local || parent=mondevirtuel.univ-rennes2.fr\n      position: {\n        x: 64,\n        y: 128,\n        width: 350,\n        height: 250,\n      },\n      visible: true,\n      allowApi: true,\n      allow: \"fullscreen\",\n      origin: \"map\",\n      scale: 1,\n    });\n\n  // Ajouer le chat du twitch fixé sur la map\n\n    WA.room.website.create({\n      name: \"Chat\",\n      url: \"https://www.twitch.tv/embed/rennes2D/chat?parent=play.workadventu.re\", // parent=play.workadventu.re en local || parent=mondevirtuel.univ-rennes2.fr\n      position: {\n        x: 270,\n        y: 128,\n        width: 150,\n        height: 500,\n      },\n      visible: false,\n      allowApi: false,\n      origin: \"map\",\n      scale: 0.5,\n    });\n\n  //========================================================\n\n  // Pour ouvir un site internet fixe sur l'écran ======\n\n  //Type à metter en paramètre de la fonction\n  /*interface CreateUIWebsiteEvent {\n      url: string,            // URL du site internet\n      visible?: boolean,      // Si la zone doit ou pas être visible\n      allowApi?: boolean,     // autoriser le site à utiliser l'api Workadventure\n      allowPolicy?: string,   // The list of feature policies allowed\n      position: {             // Position de la zone sur l'écran, 1 seule position (par type) utilisable à la fois\n          vertical: \"top\",    // autres possibilités: \"middle\" ou \"bottom\"\n          horizontal: \"left\", // autres possibilités: \"middle\" ou \"right\"\n      },\n      size: {                 // Taille de la zone (unités possibles: px|em|%|cm|in|pc|pt|mm|ex|vw|vh|rem et autres valeurs auto|inherit)\n          height: string,\n          width: string,\n      },\n      margin?: {              // décalage de la zone\n          top?: string,\n          bottom?: string,\n          left?: string,\n          right?: string,\n      },\n  }*/\n  // -> utilisation: \n  const myWebsite = await WA.ui.website.open({\n    url: \"https://www.youtube.com/embed/lBHkzgN-8ws\",\n    position: {\n        vertical: \"middle\",\n        horizontal: \"left\",\n      },\n    visible: false,\n    size: {\n        height: \"30vh\",\n        width: \"30vw\",\n    },\n    margin: {\n      left: \"5vw\"\n    }\n  });\n\n  // Montrer le site en fonction de l'entrée/sortie d'un layer\n\n  WA.room.onEnterLayer(\"chaise\").subscribe(() => {\n    myWebsite.visible = false;\n  });\n\n  /*WA.room.onLeaveLayer(\"chaise\").subscribe(() => {\n    myWebsite.visible = false;\n  });\n*/\n  //========================================================\n\n  // Comment ouvrir un \"modal\" (menu fermable != popup)\n\n  WA.ui.modal.openModal({\n    title: \"MyTitle\",                 // Titre (obligatoire)\n    src: 'https://workadventu.re',    // Site source (obligatoire)\n    allow: \"fullscreen\",              // Autorisation (facultatif)\n    allowApi: true,                   // Autorisation (obligatoire)\n    position: \"center\",                 // Position (facultatif) par défaut à droite | \"center\" OU \"left\" OU \"right\"|\n    allowFullScreen: false,\n  }, () => {                          // Fonction appelée à la fermeture\n    console.info  ('The modal was closed');\n    WA.ui.modal.closeModal();\n  });\n  WA.ui.modal.closeModal();\n\n  // WA.ui.modal.closeModal() // Pour fermer un modal\n\n  //========================================================\n\n  // Ajouter un bouton de texte à la barre d'outils\n\n  WA.ui.actionBar.addButton({\n    id: \"Nouveau bouton\",\n    label: \"Nouveau Bouton\",\n    callback: (event) => {\n      console.log(\"Nouveau bouton cliqué\", event);\n    },\n  })\n\n  WA.ui.actionBar.removeButton(\"Nouveau bouton\"); // retirer le bouton (toujours par id)\n\n  // Ajouter un nouveau bouton logo au menu\n\n  const Stitch = await WA.ui.website.open({\n    url: \"https://i.etsystatic.com/42919322/r/il/5da703/5702221647/il_570xN.5702221647_ibkz.jpg\",\n    position: {\n        vertical: \"middle\",\n        horizontal: \"middle\",\n      },\n    visible: false,\n    size: {\n        height: \"570px\",\n        width: \"428px\",\n    },\n  });\n\n  WA.ui.actionBar.addButton({\n    id: \"Nouveau logo\",\n    imageSrc: \"https://i.etsystatic.com/42919322/r/il/5da703/5702221647/il_570xN.5702221647_ibkz.jpg\", // utiliser une image en ligne sinon ça ne marche pas\n    toolTip: \"Ahhhh\",\n    callback: (event) => {\n      console.log(\"Il a cliqué sur le logo chelouuuu\", event);\n      Stitch.visible === true ? Stitch.visible = false : Stitch.visible = true; // Ligne vaudou pour rendre la visibilité de Stitch en toggle\n    }\n  });\n};\n\nWA.onInit().then(run);\n\nexport {};"],"names":["fireSound","config","run","remotePlayer","myWebsite","event","Stitch"],"mappings":"+BAKA,IAAIA,EAAY,GAAG,MAAM,UAAU,kBAAkB,EACjDC,EAAS,CACP,OAAS,IACT,KAAO,GACP,KAAO,EACP,OAAS,EACT,MAAQ,EACR,KAAO,EACP,KAAO,EACX,EAIF,MAAMC,EAAM,SAAY,CAGtB,GAAG,KAAK,aAAa,WAAW,EAAE,UAAU,IAAM,CAC3C,GAAA,KAAK,UAAU,WAAW,EAC1B,GAAA,KAAK,UAAU,UAAU,EAC5BF,EAAU,KAAKC,CAAM,CAAA,CACtB,EAED,GAAG,KAAK,aAAa,WAAW,EAAE,UAAU,IAAM,CAC7C,GAAA,KAAK,UAAU,WAAW,EAC1B,GAAA,KAAK,UAAU,UAAU,EAC5BD,EAAU,KAAK,CAAA,CAClB,EAKD,GAAG,GAAG,sBAAsB,UAAWG,GAAiB,CACvCA,EAAA,UAAU,qBAAsB,IAAM,CAC/C,QAAQ,IAAI,8BAA8B,CAAA,CAC7C,EACYA,EAAA,UAAU,uBAAwB,IAAM,CAC9C,GAAA,KAAK,UAAU,OAAO,CAAA,CAC5B,CAAA,CACJ,EAIE,GAAA,KAAK,QAAQ,OAAO,CACnB,KAAM,aACN,IAAK,kFACL,SAAU,CACR,EAAG,GACH,EAAG,IACH,MAAO,IACP,OAAQ,GACV,EACA,QAAS,GACT,SAAU,GACV,MAAO,aACP,OAAQ,MACR,MAAO,CAAA,CACR,EAIE,GAAA,KAAK,QAAQ,OAAO,CACrB,KAAM,OACN,IAAK,uEACL,SAAU,CACR,EAAG,IACH,EAAG,IACH,MAAO,IACP,OAAQ,GACV,EACA,QAAS,GACT,SAAU,GACV,OAAQ,MACR,MAAO,EAAA,CACR,EA4BH,MAAMC,EAAY,MAAM,GAAG,GAAG,QAAQ,KAAK,CACzC,IAAK,4CACL,SAAU,CACN,SAAU,SACV,WAAY,MACd,EACF,QAAS,GACT,KAAM,CACF,OAAQ,OACR,MAAO,MACX,EACA,OAAQ,CACN,KAAM,KACR,CAAA,CACD,EAID,GAAG,KAAK,aAAa,QAAQ,EAAE,UAAU,IAAM,CAC7CA,EAAU,QAAU,EAAA,CACrB,EAUE,GAAA,GAAG,MAAM,UAAU,CACpB,MAAO,UACP,IAAK,yBACL,MAAO,aACP,SAAU,GACV,SAAU,SACV,gBAAiB,EAAA,EAChB,IAAM,CACP,QAAQ,KAAO,sBAAsB,EAClC,GAAA,GAAG,MAAM,YAAW,CACxB,EACE,GAAA,GAAG,MAAM,aAQT,GAAA,GAAG,UAAU,UAAU,CACxB,GAAI,iBACJ,MAAO,iBACP,SAAWC,GAAU,CACX,QAAA,IAAI,wBAAyBA,CAAK,CAC5C,CAAA,CACD,EAEE,GAAA,GAAG,UAAU,aAAa,gBAAgB,EAI7C,MAAMC,EAAS,MAAM,GAAG,GAAG,QAAQ,KAAK,CACtC,IAAK,wFACL,SAAU,CACN,SAAU,SACV,WAAY,QACd,EACF,QAAS,GACT,KAAM,CACF,OAAQ,QACR,MAAO,OACX,CAAA,CACD,EAEE,GAAA,GAAG,UAAU,UAAU,CACxB,GAAI,eACJ,SAAU,wFACV,QAAS,QACT,SAAWD,GAAU,CACX,QAAA,IAAI,oCAAqCA,CAAK,EACtDC,EAAO,UAAY,GAAOA,EAAO,QAAU,GAAQA,EAAO,QAAU,EACtE,CAAA,CACD,CACH,EAEA,GAAG,OAAA,EAAS,KAAKJ,CAAG"}