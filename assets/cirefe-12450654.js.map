{"version":3,"file":"cirefe-12450654.js","sources":["../../src/cirefe.ts"],"sourcesContent":["/// <reference types=\"@workadventure/iframe-api-typings\" />\nimport \"./main_new.js\";\n\nconsole.log(\"cirefe lancé\")\n\nWA.onInit().then(async() => {\n\n    WA.room.area.onEnter(\"scene\").subscribe(() => { // Accorder l'accès à la scene selon les tags\n        console.log(\"Tags: \", WA.player.tags);\n        if (isAllowed(WA.player.tags)) {\n            console.log(\"Ouverture pour un.e\", WA.player.tags);\n            WA.room.hideLayer(\"floor/collisions-scene\");\n        }\n    });\n\n    WA.room.area.onLeave(\"scene\").subscribe(() => { // Accorder l'accès à la scene selon les tags\n        WA.room.showLayer(\"floor/collisions-scene\");\n    });\n});\n\nfunction isAllowed(tags: string[]): boolean {\n    const allowedTags: Array<string> = [\"admin\", \"speaker\", \"lecteur\"];\n    for (const tag of tags) {\n        if (allowedTags.includes(tag))\n            return true;\n    }\n    return false; // Le joueur ne peut pas entrer en live si il n'est pas admin, speaker ou lecteur\n};"],"names":["isAllowed","tags","allowedTags","tag"],"mappings":"+BAGA,QAAQ,IAAI,cAAc,EAE1B,GAAG,OAAA,EAAS,KAAK,SAAW,CAExB,GAAG,KAAK,KAAK,QAAQ,OAAO,EAAE,UAAU,IAAM,CAC1C,QAAQ,IAAI,SAAU,GAAG,OAAO,IAAI,EAChCA,EAAU,GAAG,OAAO,IAAI,IACxB,QAAQ,IAAI,sBAAuB,GAAG,OAAO,IAAI,EAC9C,GAAA,KAAK,UAAU,wBAAwB,EAC9C,CACH,EAED,GAAG,KAAK,KAAK,QAAQ,OAAO,EAAE,UAAU,IAAM,CACvC,GAAA,KAAK,UAAU,wBAAwB,CAAA,CAC7C,CACL,CAAC,EAED,SAASA,EAAUC,EAAyB,CACxC,MAAMC,EAA6B,CAAC,QAAS,UAAW,SAAS,EACjE,UAAWC,KAAOF,EACV,GAAAC,EAAY,SAASC,CAAG,EACjB,MAAA,GAER,MAAA,EACX"}